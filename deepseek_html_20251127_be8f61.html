<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Matrícula 2025 - Colegio La Herradura</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --primary: #1a5276;
            --secondary: #2874a6;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #27ae60;
            --warning: #f39c12;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 25px 0;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .description {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .login-container {
            max-width: 400px;
            margin: 50px auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .login-container h2 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--dark);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(26, 82, 118, 0.2);
        }
        
        .btn {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            text-align: center;
        }
        
        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .btn-success {
            background: var(--success);
        }
        
        .btn-success:hover {
            background: #219653;
        }
        
        .btn-warning {
            background: var(--warning);
        }
        
        .btn-warning:hover {
            background: #e67e22;
        }
        
        .btn-danger {
            background: var(--accent);
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .actions .btn {
            flex: 1;
            min-width: 150px;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .tab {
            padding: 12px 25px;
            cursor: pointer;
            font-weight: 600;
            color: var(--dark);
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .form-section h3 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light);
        }
        
        .form-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .form-row .form-group {
            flex: 1;
            min-width: 200px;
        }
        
        .checkbox-group, .radio-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        .checkbox-item, .radio-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .admin-panel {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .admin-panel h2 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light);
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .data-table th, .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .data-table th {
            background-color: var(--light);
            color: var(--dark);
            font-weight: 600;
        }
        
        .data-table tr:hover {
            background-color: #f9f9f9;
        }
        
        .hidden {
            display: none;
        }
        
        .alert {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .logout-btn {
            position: absolute;
            top: 20px;
            right: 20px;
        }
        
        .required::after {
            content: " *";
            color: var(--accent);
        }
        
        .section-counter {
            background: var(--primary);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .tab {
                flex: 1;
                min-width: 120px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Página de Login -->
        <div id="login-page">
            <header>
                <h1>Sistema de Matrícula 2025</h1>
                <p class="description">Colegio La Herradura - Complete el formulario para registrar los datos del estudiante</p>
            </header>
            
            <div class="login-container">
                <h2>Iniciar Sesión</h2>
                <div id="login-alert" class="alert hidden"></div>
                
                <div class="form-group">
                    <label for="username">Usuario:</label>
                    <input type="text" id="username" placeholder="Ingrese su usuario">
                </div>
                
                <div class="form-group">
                    <label for="password">Contraseña:</label>
                    <input type="password" id="password" placeholder="Ingrese su contraseña">
                </div>
                
                <div class="actions">
                    <button id="login-btn" class="btn">Iniciar Sesión</button>
                </div>
                
                <p style="text-align: center; margin-top: 20px;">
                    <a href="#" id="go-to-form">Acceder al formulario de matrícula</a>
                </p>
            </div>
        </div>
        
        <!-- Formulario de Matrícula -->
        <div id="form-page" class="hidden">
            <header>
                <h1>Formulario de Matrícula 2025</h1>
                <p class="description">Colegio La Herradura - Complete todos los campos obligatorios</p>
            </header>
            
            <div class="actions">
                <button id="admin-login-btn" class="btn">Acceso Administrativo</button>
                <button id="save-form-btn" class="btn btn-success">Guardar Matrícula</button>
                <button id="preview-pdf-btn" class="btn">Vista Previa PDF</button>
            </div>
            
            <div id="form-alert" class="alert hidden"></div>
            
            <form id="matricula-form">
                <div class="tabs">
                    <div class="tab active" data-tab="datos-alumno">1. Datos del Alumno</div>
                    <div class="tab" data-tab="antecedentes-familiares">2. Antecedentes Familiares</div>
                    <div class="tab" data-tab="antecedentes-sociales">3. Antecedentes Sociales</div>
                    <div class="tab" data-tab="apoderados">4. Apoderados</div>
                    <div class="tab" data-tab="academicos">5. Antecedentes Académicos</div>
                    <div class="tab" data-tab="salud">6. Antecedentes de Salud</div>
                    <div class="tab" data-tab="verificacion">7. Verificación</div>
                </div>
                
                <!-- Sección 1: Datos del Alumno -->
                <div class="tab-content active" id="datos-alumno">
                    <div class="form-section">
                        <h3><span class="section-counter">1</span> Datos del Alumno/a</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="apellidoPaterno" class="required">Apellido Paterno:</label>
                                <input type="text" id="apellidoPaterno" name="apellidoPaterno" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="apellidoMaterno" class="required">Apellido Materno:</label>
                                <input type="text" id="apellidoMaterno" name="apellidoMaterno" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="nombres" class="required">Nombres:</label>
                            <input type="text" id="nombres" name="nombres" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="cedulaIdentidad" class="required">Cédula de Identidad:</label>
                                <input type="text" id="cedulaIdentidad" name="cedulaIdentidad" placeholder="00000000-0" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="nacionalidad" class="required">Nacionalidad:</label>
                                <input type="text" id="nacionalidad" name="nacionalidad" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="fechaNacimiento" class="required">Fecha de Nacimiento:</label>
                                <input type="date" id="fechaNacimiento" name="fechaNacimiento" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="pasaporteDNI">N° Pasaporte o DNI:</label>
                                <input type="text" id="pasaporteDNI" name="pasaporteDNI">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="lugarNacimiento" class="required">Lugar de Nacimiento (ciudad o comuna):</label>
                                <input type="text" id="lugarNacimiento" name="lugarNacimiento" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="edad" class="required">Edad:</label>
                                <input type="number" id="edad" name="edad" min="3" max="20" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="domicilio" class="required">Domicilio:</label>
                            <input type="text" id="domicilio" name="domicilio" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sector" class="required">Sector:</label>
                                <input type="text" id="sector" name="sector" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="prevision" class="required">Fonasa (A,B,C,D) o Isapre o sin previsión:</label>
                                <select id="prevision" name="prevision" required>
                                    <option value="">Seleccione</option>
                                    <option value="Fonasa A">Fonasa A</option>
                                    <option value="Fonasa B">Fonasa B</option>
                                    <option value="Fonasa C">Fonasa C</option>
                                    <option value="Fonasa D">Fonasa D</option>
                                    <option value="Isapre">Isapre</option>
                                    <option value="Sin previsión">Sin previsión</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="etnia" class="required">Etnia:</label>
                                <input type="text" id="etnia" name="etnia" placeholder="Si no tiene escribir 'ninguna'" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="celularEmergencia" class="required">Celular de Emergencia:</label>
                                <input type="tel" id="celularEmergencia" name="celularEmergencia" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="cultoReligioso" class="required">Culto religioso:</label>
                            <input type="text" id="cultoReligioso" name="cultoReligioso" required>
                        </div>
                    </div>
                    
                    <div class="actions">
                        <button type="button" class="btn next-tab" data-next="antecedentes-familiares">Siguiente</button>
                    </div>
                </div>
                
                <!-- Sección 2: Antecedentes Familiares -->
                <div class="tab-content" id="antecedentes-familiares">
                    <div class="form-section">
                        <h3><span class="section-counter">2</span> Antecedentes Familiares - Padre</h3>
                        
                        <div class="form-group">
                            <label for="nombrePadre">Nombre Completo del Padre:</label>
                            <input type="text" id="nombrePadre" name="nombrePadre">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="rutPasaportePadre">Rut o Pasaporte:</label>
                                <input type="text" id="rutPasaportePadre" name="rutPasaportePadre">
                            </div>
                            
                            <div class="form-group">
                                <label for="nacionalidadPadre">Nacionalidad:</label>
                                <input type="text" id="nacionalidadPadre" name="nacionalidadPadre">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="fechaNacimientoPadre">Fecha de Nacimiento:</label>
                                <input type="date" id="fechaNacimientoPadre" name="fechaNacimientoPadre">
                            </div>
                            
                            <div class="form-group">
                                <label for="edadPadre">Edad:</label>
                                <input type="number" id="edadPadre" name="edadPadre" min="18" max="100">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nivelEducacionalPadre">Nivel Educacional:</label>
                                <input type="text" id="nivelEducacionalPadre" name="nivelEducacionalPadre">
                            </div>
                            
                            <div class="form-group">
                                <label for="emailPadre">E-Mail:</label>
                                <input type="email" id="emailPadre" name="emailPadre">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="domicilioPadre">Domicilio:</label>
                            <input type="text" id="domicilioPadre" name="domicilioPadre">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sectorPadre">Sector:</label>
                                <input type="text" id="sectorPadre" name="sectorPadre">
                            </div>
                            
                            <div class="form-group">
                                <label for="celularPadre">Celular:</label>
                                <input type="tel" id="celularPadre" name="celularPadre">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="ocupacionPadre">Ocupación actual:</label>
                            <input type="text" id="ocupacionPadre" name="ocupacionPadre">
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>Antecedentes Familiares - Madre</h3>
                        
                        <div class="form-group">
                            <label for="nombreMadre">Nombre Completo de la Madre:</label>
                            <input type="text" id="nombreMadre" name="nombreMadre">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="rutPasaporteMadre">Rut o Pasaporte:</label>
                                <input type="text" id="rutPasaporteMadre" name="rutPasaporteMadre">
                            </div>
                            
                            <div class="form-group">
                                <label for="nacionalidadMadre">Nacionalidad:</label>
                                <input type="text" id="nacionalidadMadre" name="nacionalidadMadre">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="fechaNacimientoMadre">Fecha de Nacimiento:</label>
                                <input type="date" id="fechaNacimientoMadre" name="fechaNacimientoMadre">
                            </div>
                            
                            <div class="form-group">
                                <label for="edadMadre">Edad:</label>
                                <input type="number" id="edadMadre" name="edadMadre" min="18" max="100">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nivelEducacionalMadre">Nivel Educacional:</label>
                                <input type="text" id="nivelEducacionalMadre" name="nivelEducacionalMadre">
                            </div>
                            
                            <div class="form-group">
                                <label for="emailMadre">E-Mail:</label>
                                <input type="email" id="emailMadre" name="emailMadre">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="domicilioMadre">Domicilio:</label>
                            <input type="text" id="domicilioMadre" name="domicilioMadre">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sectorMadre">Sector:</label>
                                <input type="text" id="sectorMadre" name="sectorMadre">
                            </div>
                            
                            <div class="form-group">
                                <label for="celularMadre">Celular:</label>
                                <input type="tel" id="celularMadre" name="celularMadre">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="ocupacionMadre">Ocupación actual:</label>
                            <input type="text" id="ocupacionMadre" name="ocupacionMadre">
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>Antecedentes Familiares</h3>
                        
                        <div class="form-group">
                            <label for="personasConQuienVive" class="required">Persona(s) con quién vive el alumno/a (Vínculo: padres, madre, papá, abuelos...):</label>
                            <input type="text" id="personasConQuienVive" name="personasConQuienVive" required>
                        </div>
                    </div>
                    
                    <div class="actions">
                        <button type="button" class="btn prev-tab" data-prev="datos-alumno">Anterior</button>
                        <button type="button" class="btn next-tab" data-next="antecedentes-sociales">Siguiente</button>
                    </div>
                </div>
                
                <!-- Sección 3: Antecedentes Sociales -->
                <div class="tab-content" id="antecedentes-sociales">
                    <div class="form-section">
                        <h3><span class="section-counter">3</span> Antecedentes Sociales de la Familia</h3>
                        
                        <div class="form-group">
                            <label for="tipoVivienda" class="required">Tipo de vivienda:</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" id="materialSolido" name="tipoVivienda" value="material sólido" required>
                                    <label for="materialSolido">Material sólido</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" id="materialLigero" name="tipoVivienda" value="material ligero" required>
                                    <label for="materialLigero">Material ligero</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" id="materialMixto" name="tipoVivienda" value="material mixto" required>
                                    <label for="materialMixto">Material mixto</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="pertenenciaVivienda" class="required">Pertenencia de la vivienda:</label>
                            <select id="pertenenciaVivienda" name="pertenenciaVivienda" required>
                                <option value="">Seleccione</option>
                                <option value="propia">Propia</option>
                                <option value="arrendada">Arrendada</option>
                                <option value="cedida">Cedida</option>
                                <option value="allegado">Allegado</option>
                                <option value="en toma">En toma</option>
                            </select>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="aguaPotable" class="required">Agua potable:</label>
                                <select id="aguaPotable" name="aguaPotable" required>
                                    <option value="">Seleccione</option>
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="tipoBano" class="required">Tipo de baño:</label>
                                <select id="tipoBano" name="tipoBano" required>
                                    <option value="">Seleccione</option>
                                    <option value="alcantarillado">Alcantarillado</option>
                                    <option value="fosa séptica">Fosa séptica</option>
                                    <option value="pozo">Pozo</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="numeroBanos" class="required">N° de baños:</label>
                                <input type="number" id="numeroBanos" name="numeroBanos" min="0" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="numeroHabitaciones" class="required">N° de habitaciones de la vivienda:</label>
                                <input type="number" id="numeroHabitaciones" name="numeroHabitaciones" min="1" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="numeroPersonasVivienda" class="required">N° de personas que habitan la vivienda:</label>
                                <input type="number" id="numeroPersonasVivienda" name="numeroPersonasVivienda" min="1" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="registroSocialHogares" class="required">Tiene registro social de hogares:</label>
                                <select id="registroSocialHogares" name="registroSocialHogares" required>
                                    <option value="">Seleccione</option>
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="numeroPersonasTrabajan" class="required">N° de personas del grupo familiar que trabajan:</label>
                                <input type="number" id="numeroPersonasTrabajan" name="numeroPersonasTrabajan" min="0" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="alumnoCategoria" class="required">Alumno/a:</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" id="prioritario" name="alumnoCategoria" value="Prioritario" required>
                                    <label for="prioritario">Prioritario</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" id="preferente" name="alumnoCategoria" value="Preferente" required>
                                    <label for="preferente">Preferente</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" id="sinInformacion" name="alumnoCategoria" value="Sin información" required>
                                    <label for="sinInformacion">Sin información</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="hermanosEnColegio" class="required">Tiene hermanos en el Colegio:</label>
                                <select id="hermanosEnColegio" name="hermanosEnColegio" required>
                                    <option value="">Seleccione</option>
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="cursosHermanos">¿En qué curso tiene hermanos?:</label>
                                <input type="text" id="cursosHermanos" name="cursosHermanos">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="medioTransporte" class="required">Medio de transporte para llegar al Colegio:</label>
                            <select id="medioTransporte" name="medioTransporte" required>
                                <option value="">Seleccione</option>
                                <option value="propia">Propia</option>
                                <option value="locomoción colectiva">Locomoción colectiva</option>
                                <option value="propia y locomoción colectiva">Propia y locomoción colectiva</option>
                                <option value="caminando">Caminando</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="tiempoTraslado" class="required">Tiempo que tarda en el traslado desde su hogar al Colegio:</label>
                            <input type="text" id="tiempoTraslado" name="tiempoTraslado" placeholder="Ej: 30 minutos" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="adultoApoyo" class="required">Existe algún adulto que apoye en el aprendizaje y labores escolares del alumno/a en el hogar:</label>
                                <select id="adultoApoyo" name="adultoApoyo" required>
                                    <option value="">Seleccione</option>
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="lugarEstudio" class="required">Existe en el hogar un lugar adecuado para realizar las labores escolares:</label>
                                <select id="lugarEstudio" name="lugarEstudio" required>
                                    <option value="">Seleccione</option>
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="calificacionLugarEstudio">Si existe el lugar para realizar las labores escolares, ¿cómo lo calificaría con nota del 1.0 a 7.0?:</label>
                            <input type="number" id="calificacionLugarEstudio" name="calificacionLugarEstudio" min="1.0" max="7.0" step="0.1">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="perteneceProgramaSocial" class="required">Pertenece algún Programa Social (Junaeb, Chile Solidario, Organismo colaborador del Sename u otro):</label>
                                <select id="perteneceProgramaSocial" name="perteneceProgramaSocial" required>
                                    <option value="">Seleccione</option>
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="cualProgramaSocial">Si respondió SI, ¿Cuál sería?</label>
                                <input type="text" id="cualProgramaSocial" name="cualProgramaSocial">
                            </div>
                        </div>
                    </div>
                    
                    <div class="actions">
                        <button type="button" class="btn prev-tab" data-prev="antecedentes-familiares">Anterior</button>
                        <button type="button" class="btn next-tab" data-next="apoderados">Siguiente</button>
                    </div>
                </div>
                
                <!-- Sección 4: Apoderados -->
                <div class="tab-content" id="apoderados">
                    <div class="form-section">
                        <h3><span class="section-counter">4</span> Nombre del Apoderado/a Titular y Suplente</h3>
                        
                        <div class="form-group">
                            <label for="nombreApoderadoTitular" class="required">Nombre Completo Apoderado/a Titular:</label>
                            <input type="text" id="nombreApoderadoTitular" name="nombreApoderadoTitular" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="celularTitular" class="required">Celular:</label>
                                <input type="tel" id="celularTitular" name="celularTitular" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="rutPasaporteTitular" class="required">Rut o Pasaporte:</label>
                                <input type="text" id="rutPasaporteTitular" name="rutPasaporteTitular" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="emailTitular" class="required">E-Mail:</label>
                            <input type="email" id="emailTitular" name="emailTitular" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="nivelEducacionalTitular" class="required">Indique el último nivel educacional cursado:</label>
                            <input type="text" id="nivelEducacionalTitular" name="nivelEducacionalTitular" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="required">¿Cuál es su situación laboral actual?</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" id="sinTrabajo" name="situacionLaboralTitular" value="Sin trabajo" required>
                                    <label for="sinTrabajo">Sin trabajo</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" id="conTrabajo" name="situacionLaboralTitular" value="Con trabajo" required>
                                    <label for="conTrabajo">Con trabajo</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group" id="lugarTrabajoGroup">
                            <label class="required">Si actualmente se encuentra trabajando, ¿dónde trabaja principalmente?</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" id="trabajoHogar" name="lugarTrabajoTitular" value="En el hogar">
                                    <label for="trabajoHogar">En el hogar</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" id="trabajoFuera" name="lugarTrabajoTitular" value="Fuera del hogar">
                                    <label for="trabajoFuera">Fuera del hogar</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="nombreApoderadoSuplente">Nombre Completo Apoderado/a Suplente:</label>
                            <input type="text" id="nombreApoderadoSuplente" name="nombreApoderadoSuplente">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="celularSuplente">Celular:</label>
                                <input type="tel" id="celularSuplente" name="celularSuplente">
                            </div>
                            
                            <div class="form-group">
                                <label for="rutPasaporteSuplente">Rut o Pasaporte:</label>
                                <input type="text" id="rutPasaporteSuplente" name="rutPasaporteSuplente">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="emailSuplente">E-Mail:</label>
                            <input type="email" id="emailSuplente" name="emailSuplente">
                        </div>
                    </div>
                    
                    <div class="actions">
                        <button type="button" class="btn prev-tab" data-prev="antecedentes-sociales">Anterior</button>
                        <button type="button" class="btn next-tab" data-next="academicos">Siguiente</button>
                    </div>
                </div>
                
                <!-- Sección 5: Antecedentes Académicos -->
                <div class="tab-content" id="academicos">
                    <div class="form-section">
                        <h3><span class="section-counter">5</span> Antecedentes Académicos del Alumno/a</h3>
                        
                        <div class="form-group">
                            <label for="colegioProcedencia" class="required">Colegio de procedencia:</label>
                            <input type="text" id="colegioProcedencia" name="colegioProcedencia" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="haRepetido" class="required">Ha repetido algún curso:</label>
                                <select id="haRepetido" name="haRepetido" required>
                                    <option value="">Seleccione</option>
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="cursosRepetidos">Si respondió SI, ¿qué curso(s)?:</label>
                                <input type="text" id="cursosRepetidos" name="cursosRepetidos">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="pertenecePIE" class="required">¿Pertenece a un Programa Integración Escolar PIE?:</label>
                                <select id="pertenecePIE" name="pertenecePIE" required>
                                    <option value="">Seleccione</option>
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="diagnosticoPIE">Si respondió SI, ¿Cuál sería el diagnóstico?</label>
                                <textarea id="diagnosticoPIE" name="diagnosticoPIE" rows="3"></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <div class="actions">
                        <button type="button" class="btn prev-tab" data-prev="apoderados">Anterior</button>
                        <button type="button" class="btn next-tab" data-next="salud">Siguiente</button>
                    </div>
                </div>
                
                <!-- Sección 6: Antecedentes de Salud -->
                <div class="tab-content" id="salud">
                    <div class="form-section">
                        <h3><span class="section-counter">6</span> Antecedentes de Salud del Alumno/a</h3>
                        
                        <div class="form-group">
                            <label>Problemas de salud:</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="problemaVisual" name="problemaVisual" value="SI">
                                    <label for="problemaVisual">Visual</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="problemaAuditivo" name="problemaAuditivo" value="SI">
                                    <label for="problemaAuditivo">Auditivo</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="problemaCardiaco" name="problemaCardiaco" value="SI">
                                    <label for="problemaCardiaco">Cardiaco</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="problemaColumna" name="problemaColumna" value="SI">
                                    <label for="problemaColumna">Columna</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="padeceEnfermedad" class="required">¿Padece alguna enfermedad?:</label>
                                <select id="padeceEnfermedad" name="padeceEnfermedad" required>
                                    <option value="">Seleccione</option>
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="cualEnfermedad">Si respondió SI, ¿cuál sería?:</label>
                                <input type="text" id="cualEnfermedad" name="cualEnfermedad">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="tomaMedicamento" class="required">Toma algún medicamento:</label>
                                <select id="tomaMedicamento" name="tomaMedicamento" required>
                                    <option value="">Seleccione</option>
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="cualMedicamento">Si respondió SI, ¿cuál sería?:</label>
                                <input type="text" id="cualMedicamento" name="cualMedicamento">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="esAlergico" class="required">Es alérgico/a:</label>
                                <select id="esAlergico" name="esAlergico" required>
                                    <option value="">Seleccione</option>
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="cualAlergia">Si respondió SI, ¿cuál sería?:</label>
                                <input type="text" id="cualAlergia" name="cualAlergia">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="medicamentoContraindicado" class="required">¿Tiene algún medicamento contraindicado?:</label>
                                <select id="medicamentoContraindicado" name="medicamentoContraindicado" required>
                                    <option value="">Seleccione</option>
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="cualMedicamentoContraindicado">Si respondió SI, ¿cuál sería?:</label>
                                <input type="text" id="cualMedicamentoContraindicado" name="cualMedicamentoContraindicado">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="problemaSaludEF" class="required">Problemas de Salud Significativo para no realizar Asignatura de Educación Física:</label>
                                <select id="problemaSaludEF" name="problemaSaludEF" required>
                                    <option value="">Seleccione</option>
                                    <option value="SI">SI</option>
                                    <option value="NO">NO</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="cualProblemaSaludEF">Si respondió SI, ¿cuál sería?:</label>
                                <input type="text" id="cualProblemaSaludEF" name="cualProblemaSaludEF">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="peso" class="required">Peso(kg):</label>
                                <input type="number" id="peso" name="peso" min="0" step="0.1" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="talla" class="required">Talla(cm):</label>
                                <input type="number" id="talla" name="talla" min="0" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="grupoSanguineo" class="required">Grupo Sanguíneo:</label>
                                <input type="text" id="grupoSanguineo" name="grupoSanguineo" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>Autorización para realizar retiro diario del alumno/a del colegio</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nombreRetiro1">Nombre:</label>
                                <input type="text" id="nombreRetiro1" name="nombreRetiro1">
                            </div>
                            
                            <div class="form-group">
                                <label for="rutPasaporteRetiro1">Rut o pasaporte:</label>
                                <input type="text" id="rutPasaporteRetiro1" name="rutPasaporteRetiro1">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="celularRetiro1">Celular:</label>
                                <input type="tel" id="celularRetiro1" name="celularRetiro1">
                            </div>
                            
                            <div class="form-group">
                                <label for="parentescoRetiro1">Parentesco:</label>
                                <input type="text" id="parentescoRetiro1" name="parentescoRetiro1">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nombreRetiro2">Nombre:</label>
                                <input type="text" id="nombreRetiro2" name="nombreRetiro2">
                            </div>
                            
                            <div class="form-group">
                                <label for="rutPasaporteRetiro2">Rut o pasaporte:</label>
                                <input type="text" id="rutPasaporteRetiro2" name="rutPasaporteRetiro2">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="celularRetiro2">Celular:</label>
                                <input type="tel" id="celularRetiro2" name="celularRetiro2">
                            </div>
                            
                            <div class="form-group">
                                <label for="parentescoRetiro2">Parentesco:</label>
                                <input type="text" id="parentescoRetiro2" name="parentescoRetiro2">
                            </div>
                        </div>
                    </div>
                    
                    <div class="actions">
                        <button type="button" class="btn prev-tab" data-prev="academicos">Anterior</button>
                        <button type="button" class="btn next-tab" data-next="verificacion">Siguiente</button>
                    </div>
                </div>
                
                <!-- Sección 7: Verificación -->
                <div class="tab-content" id="verificacion">
                    <div class="form-section">
                        <h3><span class="section-counter">7</span> Verificación</h3>
                        
                        <div class="form-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="declaracion1" name="declaracion1" value="Acepto" required>
                                <label for="declaracion1" class="required">Declaro conocer y aceptar el Proyecto Educativo, Reglamento Interno y Reglamento de Evaluación del Colegio La Herradura, así como, las responsabilidades que debo cumplir como Apoderado/a, especialmente en asistir al establecimiento educacional, cada vez que sea citado o a reuniones de curso.</label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="declaracion2" name="declaracion2" value="Acepto" required>
                                <label for="declaracion2" class="required">La información entregada es fidedigna, haciéndome responsable de cualquier omisión. Además, me comprometo a actualizar los datos de la Ficha Escolar, cuando sea necesario.</label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="declaracion3" name="declaracion3" value="Acepto" required>
                                <label for="declaracion3" class="required">Autorizo al Colegio La Herradura a utilizar medios audiovisuales y fotográficos de mi pupilo/a en actividades de difusión del Colegio ante la comunidad.</label>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nombreApoderadoFirma" class="required">Nombre apoderado que firmará:</label>
                                <input type="text" id="nombreApoderadoFirma" name="nombreApoderadoFirma" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="rutPasaporteFirma" class="required">RUT o PASAPORTE del apoderado que firmará:</label>
                                <input type="text" id="rutPasaporteFirma" name="rutPasaporteFirma" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="actions">
                        <button type="button" class="btn prev-tab" data-prev="salud">Anterior</button>
                        <button type="submit" class="btn btn-success">Enviar Matrícula</button>
                    </div>
                </div>
            </form>
        </div>
        
        <!-- Panel de Administración -->
        <div id="admin-page" class="hidden">
            <header>
                <h1>Panel de Administración - Matrícula 2025</h1>
                <p class="description">Colegio La Herradura - Gestión de datos y usuarios</p>
                <button id="logout-btn" class="btn logout-btn">Cerrar Sesión</button>
            </header>
            
            <div class="admin-panel">
                <div class="tabs">
                    <div class="tab active" data-tab="gestion-matriculas">Gestión de Matrículas</div>
                    <div class="tab" data-tab="gestion-usuarios">Gestión de Usuarios</div>
                    <div class="tab" data-tab="exportar-datos">Exportar Datos</div>
                </div>
                
                <!-- Gestión de Matrículas -->
                <div class="tab-content active" id="gestion-matriculas">
                    <h2>Matrículas Registradas</h2>
                    <div class="actions">
                        <button id="refresh-data" class="btn">Actualizar Datos</button>
                    </div>
                    <table class="data-table" id="matriculas-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Apellidos</th>
                                <th>Nombres</th>
                                <th>Cédula</th>
                                <th>Fecha Registro</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="matriculas-body">
                            <!-- Los datos se cargarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Gestión de Usuarios -->
                <div class="tab-content" id="gestion-usuarios">
                    <h2>Gestión de Usuarios Administrativos</h2>
                    <div class="form-section">
                        <h3>Agregar Nuevo Usuario</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nuevo-usuario">Usuario:</label>
                                <input type="text" id="nuevo-usuario">
                            </div>
                            <div class="form-group">
                                <label for="nueva-contrasena">Contraseña:</label>
                                <input type="password" id="nueva-contrasena">
                            </div>
                            <div class="form-group">
                                <button id="agregar-usuario" class="btn">Agregar Usuario</button>
                            </div>
                        </div>
                    </div>
                    
                    <h3>Usuarios Existentes</h3>
                    <table class="data-table" id="usuarios-table">
                        <thead>
                            <tr>
                                <th>Usuario</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="usuarios-body">
                            <!-- Los datos se cargarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Exportar Datos -->
                <div class="tab-content" id="exportar-datos">
                    <h2>Exportar Datos de Matrículas</h2>
                    <div class="form-section">
                        <div class="form-group">
                            <label for="formato-exportacion">Formato de exportación:</label>
                            <select id="formato-exportacion">
                                <option value="pdf">PDF (Ficha de Matrícula)</option>
                                <option value="csv">CSV (Datos en tabla)</option>
                                <option value="json">JSON (Datos estructurados)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="filtro-matricula">Filtrar por:</label>
                            <select id="filtro-matricula">
                                <option value="todos">Todos los registros</option>
                                <option value="fecha">Por fecha</option>
                                <option value="curso">Por curso</option>
                            </select>
                        </div>
                        
                        <div class="form-row" id="filtro-fecha" style="display: none;">
                            <div class="form-group">
                                <label for="fecha-desde">Desde:</label>
                                <input type="date" id="fecha-desde">
                            </div>
                            <div class="form-group">
                                <label for="fecha-hasta">Hasta:</label>
                                <input type="date" id="fecha-hasta">
                            </div>
                        </div>
                        
                        <div class="actions">
                            <button id="exportar-datos-btn" class="btn btn-success">Exportar Datos</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Inicializar jsPDF
        const { jsPDF } = window.jspdf;
        
        // Credenciales de administrador
        const ADMIN_USERNAME = 'admin';
        const ADMIN_PASSWORD = '1234qwe';
        
        // Elementos del DOM
        const loginPage = document.getElementById('login-page');
        const formPage = document.getElementById('form-page');
        const adminPage = document.getElementById('admin-page');
        
        const loginBtn = document.getElementById('login-btn');
        const adminLoginBtn = document.getElementById('admin-login-btn');
        const goToFormBtn = document.getElementById('go-to-form');
        const logoutBtn = document.getElementById('logout-btn');
        
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        
        const loginAlert = document.getElementById('login-alert');
        const formAlert = document.getElementById('form-alert');
        
        const matriculaForm = document.getElementById('matricula-form');
        const saveFormBtn = document.getElementById('save-form-btn');
        const previewPdfBtn = document.getElementById('preview-pdf-btn');
        
        // Funciones de navegación entre pestañas
        function showAlert(element, message, type) {
            element.textContent = message;
            element.className = `alert alert-${type}`;
            element.classList.remove('hidden');
            
            setTimeout(() => {
                element.classList.add('hidden');
            }, 5000);
        }
        
        function navigateToTab(tabId) {
            // Ocultar todas las pestañas
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostrar la pestaña seleccionada
            document.getElementById(tabId).classList.add('active');
            
            // Actualizar los indicadores de pestañas
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-tab') === tabId) {
                    tab.classList.add('active');
                }
            });
        }
        
        // Navegación entre secciones del formulario
        document.querySelectorAll('.next-tab').forEach(button => {
            button.addEventListener('click', function() {
                const nextTab = this.getAttribute('data-next');
                navigateToTab(nextTab);
            });
        });
        
        document.querySelectorAll('.prev-tab').forEach(button => {
            button.addEventListener('click', function() {
                const prevTab = this.getAttribute('data-prev');
                navigateToTab(prevTab);
            });
        });
        
        // Navegación entre pestañas principales
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                navigateToTab(tabId);
            });
        });
        
        // Mostrar/ocultar lugar de trabajo según situación laboral
        document.querySelectorAll('input[name="situacionLaboralTitular"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const lugarTrabajoGroup = document.getElementById('lugarTrabajoGroup');
                if (this.value === 'Con trabajo') {
                    lugarTrabajoGroup.style.display = 'block';
                    lugarTrabajoGroup.querySelectorAll('input').forEach(input => {
                        input.required = true;
                    });
                } else {
                    lugarTrabajoGroup.style.display = 'none';
                    lugarTrabajoGroup.querySelectorAll('input').forEach(input => {
                        input.required = false;
                    });
                }
            });
        });
        
        // Mostrar campos condicionales
        document.getElementById('hermanosEnColegio').addEventListener('change', function() {
            const cursosHermanos = document.getElementById('cursosHermanos');
            cursosHermanos.required = this.value === 'SI';
        });
        
        document.getElementById('perteneceProgramaSocial').addEventListener('change', function() {
            const cualProgramaSocial = document.getElementById('cualProgramaSocial');
            cualProgramaSocial.required = this.value === 'SI';
        });
        
        document.getElementById('haRepetido').addEventListener('change', function() {
            const cursosRepetidos = document.getElementById('cursosRepetidos');
            cursosRepetidos.required = this.value === 'SI';
        });
        
        document.getElementById('pertenecePIE').addEventListener('change', function() {
            const diagnosticoPIE = document.getElementById('diagnosticoPIE');
            diagnosticoPIE.required = this.value === 'SI';
        });
        
        document.getElementById('padeceEnfermedad').addEventListener('change', function() {
            const cualEnfermedad = document.getElementById('cualEnfermedad');
            cualEnfermedad.required = this.value === 'SI';
        });
        
        document.getElementById('tomaMedicamento').addEventListener('change', function() {
            const cualMedicamento = document.getElementById('cualMedicamento');
            cualMedicamento.required = this.value === 'SI';
        });
        
        document.getElementById('esAlergico').addEventListener('change', function() {
            const cualAlergia = document.getElementById('cualAlergia');
            cualAlergia.required = this.value === 'SI';
        });
        
        document.getElementById('medicamentoContraindicado').addEventListener('change', function() {
            const cualMedicamentoContraindicado = document.getElementById('cualMedicamentoContraindicado');
            cualMedicamentoContraindicado.required = this.value === 'SI';
        });
        
        document.getElementById('problemaSaludEF').addEventListener('change', function() {
            const cualProblemaSaludEF = document.getElementById('cualProblemaSaludEF');
            cualProblemaSaludEF.required = this.value === 'SI';
        });
        
        // Filtros para exportación
        document.getElementById('filtro-matricula').addEventListener('change', function() {
            const filtroFecha = document.getElementById('filtro-fecha');
            if (this.value === 'fecha') {
                filtroFecha.style.display = 'flex';
            } else {
                filtroFecha.style.display = 'none';
            }
        });
        
        // Funciones de autenticación
        function login(username, password) {
            if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
                localStorage.setItem('adminLoggedIn', 'true');
                showAdminPage();
                return true;
            } else {
                showAlert(loginAlert, 'Usuario o contraseña incorrectos', 'error');
                return false;
            }
        }
        
        function logout() {
            localStorage.removeItem('adminLoggedIn');
            showLoginPage();
        }
        
        function checkAdminLogin() {
            return localStorage.getItem('adminLoggedIn') === 'true';
        }
        
        // Funciones de navegación entre páginas
        function showLoginPage() {
            loginPage.classList.remove('hidden');
            formPage.classList.add('hidden');
            adminPage.classList.add('hidden');
        }
        
        function showFormPage() {
            loginPage.classList.add('hidden');
            formPage.classList.remove('hidden');
            adminPage.classList.add('hidden');
        }
        
        function showAdminPage() {
            loginPage.classList.add('hidden');
            formPage.classList.add('hidden');
            adminPage.classList.remove('hidden');
            loadAdminData();
        }
        
        // Cargar datos en el panel de administración
        function loadAdminData() {
            // Cargar matrículas
            const matriculas = JSON.parse(localStorage.getItem('matriculas')) || [];
            const matriculasBody = document.getElementById('matriculas-body');
            matriculasBody.innerHTML = '';
            
            matriculas.forEach((matricula, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${matricula.apellidoPaterno} ${matricula.apellidoMaterno}</td>
                    <td>${matricula.nombres}</td>
                    <td>${matricula.cedulaIdentidad}</td>
                    <td>${new Date().toLocaleDateString()}</td>
                    <td>
                        <button class="btn btn-warning" onclick="viewMatricula(${index})">Ver</button>
                        <button class="btn btn-danger" onclick="deleteMatricula(${index})">Eliminar</button>
                    </td>
                `;
                matriculasBody.appendChild(row);
            });
            
            // Cargar usuarios (en una implementación real, esto vendría de una base de datos)
            const usuariosBody = document.getElementById('usuarios-body');
            usuariosBody.innerHTML = `
                <tr>
                    <td>admin</td>
                    <td>
                        <button class="btn btn-danger" disabled>Eliminar</button>
                    </td>
                </tr>
            `;
        }
        
        // Funciones para gestionar matrículas
        function saveMatricula() {
            const formData = new FormData(matriculaForm);
            const matriculaData = {};
            
            // Recopilar todos los datos del formulario
            for (let [key, value] of formData.entries()) {
                matriculaData[key] = value;
            }
            
            // Validar formulario
            if (!validateForm()) {
                showAlert(formAlert, 'Por favor, complete todos los campos obligatorios', 'error');
                return false;
            }
            
            // Guardar en localStorage
            const matriculas = JSON.parse(localStorage.getItem('matriculas')) || [];
            matriculas.push(matriculaData);
            localStorage.setItem('matriculas', JSON.stringify(matriculas));
            
            showAlert(formAlert, 'Matrícula guardada correctamente', 'success');
            matriculaForm.reset();
            navigateToTab('datos-alumno');
            
            return true;
        }
        
        function validateForm() {
            const requiredFields = matriculaForm.querySelectorAll('[required]');
            let isValid = true;
            
            for (let field of requiredFields) {
                if (!field.value.trim()) {
                    isValid = false;
                    field.style.borderColor = 'red';
                } else {
                    field.style.borderColor = '#ddd';
                }
            }
            
            return isValid;
        }
        
        function viewMatricula(index) {
            const matriculas = JSON.parse(localStorage.getItem('matriculas')) || [];
            const matricula = matriculas[index];
            
            if (matricula) {
                // Llenar el formulario con los datos de la matrícula
                for (let key in matricula) {
                    const field = document.querySelector(`[name="${key}"]`);
                    if (field) {
                        if (field.type === 'checkbox' || field.type === 'radio') {
                            if (field.value === matricula[key]) {
                                field.checked = true;
                            }
                        } else {
                            field.value = matricula[key];
                        }
                    }
                }
                
                showFormPage();
            }
        }
        
        function deleteMatricula(index) {
            if (confirm('¿Está seguro de que desea eliminar esta matrícula?')) {
                const matriculas = JSON.parse(localStorage.getItem('matriculas')) || [];
                matriculas.splice(index, 1);
                localStorage.setItem('matriculas', JSON.stringify(matriculas));
                loadAdminData();
            }
        }
        
        function exportData() {
            const formato = document.getElementById('formato-exportacion').value;
            const matriculas = JSON.parse(localStorage.getItem('matriculas')) || [];
            
            if (matriculas.length === 0) {
                alert('No hay datos para exportar');
                return;
            }
            
            if (formato === 'pdf') {
                generatePDF(matriculas[0]); // Exportar la primera matrícula como ejemplo
            } else if (formato === 'csv') {
                exportToCSV(matriculas);
            } else if (formato === 'json') {
                exportToJSON(matriculas);
            }
        }
        
        function generatePDF(matriculaData) {
            const pdf = new jsPDF('p', 'mm', 'a4');
            
            // Título
            pdf.setFontSize(16);
            pdf.text('FICHA DE MATRÍCULA', 105, 20, { align: 'center' });
            pdf.setFontSize(14);
            pdf.text('Colegio La Herradura 2026', 105, 28, { align: 'center' });
            
            // Antecedentes del Alumno
            pdf.setFontSize(12);
            pdf.text('Antecedentes del Alumno/a', 20, 40);
            
            // Aquí continuarías con la estructura de la ficha PDF según el formato proporcionado
            // Esto es un ejemplo básico
            
            pdf.text(`Apellido Paterno: ${matriculaData.apellidoPaterno || ''}`, 20, 50);
            pdf.text(`Apellido Materno: ${matriculaData.apellidoMaterno || ''}`, 100, 50);
            pdf.text(`Nombres: ${matriculaData.nombres || ''}`, 20, 57);
            pdf.text(`Cédula de Identidad: ${matriculaData.cedulaIdentidad || ''}`, 20, 64);
            pdf.text(`Nacionalidad: ${matriculaData.nacionalidad || ''}`, 100, 64);
            
            // Guardar el PDF
            pdf.save(`Ficha_Matricula_${matriculaData.apellidoPaterno}_${matriculaData.apellidoMaterno}.pdf`);
        }
        
        function exportToCSV(matriculas) {
            if (matriculas.length === 0) return;
            
            const headers = Object.keys(matriculas[0]);
            const csvContent = [
                headers.join(','),
                ...matriculas.map(row => 
                    headers.map(header => 
                        JSON.stringify(row[header] || '')
                    ).join(',')
                )
            ].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'matriculas.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        function exportToJSON(matriculas) {
            const dataStr = JSON.stringify(matriculas, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'matriculas.json');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        // Event Listeners
        loginBtn.addEventListener('click', () => {
            const username = usernameInput.value;
            const password = passwordInput.value;
            login(username, password);
        });
        
        adminLoginBtn.addEventListener('click', () => {
            const username = prompt('Usuario:');
            const password = prompt('Contraseña:');
            login(username, password);
        });
        
        goToFormBtn.addEventListener('click', (e) => {
            e.preventDefault();
            showFormPage();
        });
        
        logoutBtn.addEventListener('click', logout);
        
        saveFormBtn.addEventListener('click', saveMatricula);
        
        matriculaForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (saveMatricula()) {
                // Opcional: redirigir o mostrar mensaje de éxito
            }
        });
        
        previewPdfBtn.addEventListener('click', () => {
            const formData = new FormData(matriculaForm);
            const matriculaData = {};
            
            for (let [key, value] of formData.entries()) {
                matriculaData[key] = value;
            }
            
            generatePDF(matriculaData);
        });
        
        document.getElementById('refresh-data').addEventListener('click', loadAdminData);
        
        document.getElementById('agregar-usuario').addEventListener('click', () => {
            const nuevoUsuario = document.getElementById('nuevo-usuario').value;
            const nuevaContrasena = document.getElementById('nueva-contrasena').value;
            
            if (nuevoUsuario && nuevaContrasena) {
                // En una implementación real, guardarías el usuario en una base de datos
                alert('Usuario agregado (en una implementación real, se guardaría en la base de datos)');
                document.getElementById('nuevo-usuario').value = '';
                document.getElementById('nueva-contrasena').value = '';
            } else {
                alert('Por favor, complete ambos campos');
            }
        });
        
        document.getElementById('exportar-datos-btn').addEventListener('click', exportData);
        
        // Inicializar la aplicación
        if (checkAdminLogin()) {
            showAdminPage();
        } else {
            showLoginPage();
        }
        
        // Hacer las funciones globales para que puedan ser llamadas desde los botones
        window.viewMatricula = viewMatricula;
        window.deleteMatricula = deleteMatricula;
    </script>
</body>
</html>